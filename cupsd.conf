# ==============================
# BASIC CUPS CONFIG — OPEN LAN
# NO KERBEROS / OPTIONAL ENCRYPTION
# ==============================

LogLevel warn
MaxLogSize 1m

# Listen on LAN + socket
Port 631
Listen /run/cups/cups.sock
Listen 192.168.2.6:631

# Browsing / discovery
Browsing On
BrowseLocalProtocols dnssd
BrowseWebIF Yes

# Web UI
WebInterface Yes

# ---- AUTH / SECURITY (OPEN LAN) ----
DefaultAuthType None
DefaultEncryption IfRequested
Kerberos Off

# Do not force auth on jobs
JobRetryInterval 30
JobRetryLimit 50
ErrorPolicy retry-job

# Prevent idle shutdown
IdleExitTimeout 0

# ==============================
# LOCATION RULES — OPEN
# ==============================

<Location />
  Order allow,deny
  Allow all
  Encryption IfRequested
</Location>

<Location /printers>
  Order allow,deny
  Allow all
  Encryption IfRequested
</Location>

<Location /classes>
  Order allow,deny
  Allow all
  Encryption IfRequested
</Location>

# ---- ADMIN UI (NO AUTH FOR NOW) ----
<Location /admin>
  Order allow,deny
  Allow all
  Encryption IfRequested
</Location>

<Location /admin/conf>
  Order allow,deny
  Allow all
  Encryption IfRequested
</Location>

<Location /admin/log>
  Order allow,deny
  Allow all
  Encryption IfRequested
</Location>

# ==============================
# POLICIES — SIMPLIFIED
# ==============================

<Policy default>
  JobPrivateAccess all
  JobPrivateValues none
  SubscriptionPrivateAccess all
  SubscriptionPrivateValues none

  <Limit All>
    Order allow,deny
    Allow all
  </Limit>
</Policy>
