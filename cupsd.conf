# ==============================
# BASIC CUPS CONFIG — OPEN LAN
# NO KERBEROS / NO ENCRYPTION
# AUTH REQUIRED FOR ADMIN ONLY
# ==============================
LogLevel warn
MaxLogSize 1m

# Listen on LAN + socket
Port 631
Listen /run/cups/cups.sock
Listen 192.168.2.6:631

# Browsing / discovery (DISABLED - no auto-added printers)
Browsing Off
BrowseLocalProtocols none
BrowseWebIF No

# Web UI
WebInterface Yes

# ---- AUTH / SECURITY (OPEN LAN) ----
DefaultAuthType Basic
DefaultEncryption Never
Kerberos Off

# Do not force auth on jobs
JobRetryInterval 30
JobRetryLimit 50
ErrorPolicy retry-job

# Prevent idle shutdown
IdleExitTimeout 0

# ==============================
# LOCATION RULES — OPEN + WILDCARD
# ==============================
<Location />
  Order allow,deny
  Allow all
  Encryption Never
</Location>

<Location /printers>
  Order allow,deny
  Allow all
  Encryption Never
</Location>

<Location /printers/*>
  Order allow,deny
  Allow all
  Encryption Never
</Location>

<Location /classes>
  Order allow,deny
  Allow all
  Encryption Never
</Location>

<Location /classes/*>
  Order allow,deny
  Allow all
  Encryption Never
</Location>

<Location /jobs>
  Order allow,deny
  Allow all
  Encryption Never
</Location>

<Location /jobs/*>
  Order allow,deny
  Allow all
  Encryption Never
</Location>

# ---- ADMIN UI (AUTH REQUIRED) ----
<Location /admin>
  Order allow,deny
  Allow all
  AuthType Basic
  Require user @SYSTEM
  Encryption Never
</Location>

<Location /admin/conf>
  Order allow,deny
  Allow all
  AuthType Basic
  Require user @SYSTEM
  Encryption Never
</Location>

<Location /admin/log>
  Order allow,deny
  Allow all
  AuthType Basic
  Require user @SYSTEM
  Encryption Never
</Location>

# ==============================
# POLICIES — SIMPLIFIED
# ==============================
<Policy default>
  JobPrivateAccess all
  JobPrivateValues none
  SubscriptionPrivateAccess all
  SubscriptionPrivateValues none
  
  <Limit All>
    Order allow,deny
    Allow all
  </Limit>
</Policy>
